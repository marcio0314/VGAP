{
    "version": "1.0",
    "generated_at": "2026-01-11T11:17:00Z",
    "platform": "VGAP - Viral Genomics Analysis Platform",
    "layers": {
        "presentation": {
            "components": [
                "frontend/src/pages/Landing.tsx",
                "frontend/src/pages/Login.tsx",
                "frontend/src/pages/Dashboard.tsx",
                "frontend/src/components/Layout.tsx"
            ],
            "depends_on": [
                "api"
            ]
        },
        "api": {
            "components": [
                "vgap/api/main.py",
                "vgap/api/routes/auth.py",
                "vgap/api/routes/runs.py",
                "vgap/api/routes/samples.py",
                "vgap/api/routes/reports.py",
                "vgap/api/routes/admin.py"
            ],
            "depends_on": [
                "services",
                "models",
                "schemas"
            ]
        },
        "services": {
            "components": [
                "vgap/services/user_service.py",
                "vgap/services/run_service.py",
                "vgap/services/database.py",
                "vgap/services/upload.py",
                "vgap/services/pipeline.py"
            ],
            "depends_on": [
                "models",
                "worker"
            ]
        },
        "worker": {
            "components": [
                "vgap/worker.py",
                "vgap/services/pipeline.py"
            ],
            "depends_on": [
                "pipeline",
                "models"
            ]
        },
        "pipeline": {
            "components": [
                "vgap/pipeline/qc.py",
                "vgap/pipeline/mapping.py",
                "vgap/pipeline/variants.py",
                "vgap/pipeline/lineage.py",
                "vgap/pipeline/phylogeny.py",
                "vgap/pipeline/assembly.py",
                "vgap/pipeline/comparative.py",
                "vgap/pipeline/reporting.py"
            ],
            "depends_on": [
                "config",
                "utils"
            ],
            "note": "CORE SCIENTIFIC LOGIC - NOT MODIFIED"
        },
        "validators": {
            "components": [
                "vgap/validators/preflight.py"
            ],
            "depends_on": [
                "config"
            ]
        },
        "models": {
            "components": [
                "vgap/models/__init__.py"
            ],
            "depends_on": []
        },
        "schemas": {
            "components": [
                "vgap/api/schemas.py"
            ],
            "depends_on": []
        },
        "config": {
            "components": [
                "vgap/config.py"
            ],
            "depends_on": []
        },
        "utils": {
            "components": [
                "vgap/utils/provenance.py"
            ],
            "depends_on": []
        }
    },
    "data_flows": [
        {
            "name": "Authentication",
            "path": [
                "frontend",
                "api/auth.py",
                "services/user_service.py",
                "models/User"
            ],
            "status": "verified"
        },
        {
            "name": "Run Creation",
            "path": [
                "frontend",
                "api/runs.py",
                "services/run_service.py",
                "models/Run",
                "worker"
            ],
            "status": "verified"
        },
        {
            "name": "Pipeline Execution",
            "path": [
                "worker",
                "services/pipeline.py",
                "pipeline/*",
                "utils/provenance.py"
            ],
            "status": "verified"
        },
        {
            "name": "Report Generation",
            "path": [
                "api/reports.py",
                "pipeline/reporting.py",
                "filesystem"
            ],
            "status": "verified"
        }
    ],
    "endpoints": {
        "auth": [
            "POST /api/v1/auth/login",
            "POST /api/v1/auth/register",
            "GET /api/v1/auth/me",
            "POST /api/v1/auth/refresh"
        ],
        "runs": [
            "GET /api/v1/runs",
            "POST /api/v1/runs",
            "GET /api/v1/runs/{id}",
            "GET /api/v1/runs/{id}/status",
            "POST /api/v1/runs/{id}/start",
            "POST /api/v1/runs/{id}/cancel",
            "POST /api/v1/runs/{id}/validate",
            "GET /api/v1/runs/{id}/provenance"
        ],
        "samples": [
            "GET /api/v1/samples/{id}",
            "GET /api/v1/samples/{id}/qc",
            "GET /api/v1/samples/{id}/variants",
            "GET /api/v1/samples/{id}/consensus",
            "GET /api/v1/samples/{id}/lineage",
            "GET /api/v1/samples/{id}/coverage",
            "GET /api/v1/samples/{id}/vcf"
        ],
        "reports": [
            "POST /api/v1/reports/{id}/generate",
            "GET /api/v1/reports/{id}/download/{report_id}",
            "GET /api/v1/reports/{id}/figures/{name}",
            "GET /api/v1/reports/{id}/exports/{type}",
            "GET /api/v1/reports/{id}/package"
        ],
        "admin": [
            "GET /api/v1/admin/users",
            "POST /api/v1/admin/users",
            "GET /api/v1/admin/users/{id}",
            "PATCH /api/v1/admin/users/{id}",
            "POST /api/v1/admin/users/{id}/deactivate",
            "GET /api/v1/admin/databases",
            "POST /api/v1/admin/databases/{name}/update",
            "GET /api/v1/admin/audit-log",
            "GET /api/v1/admin/status"
        ],
        "health": [
            "GET /health",
            "GET /health/live",
            "GET /health/ready",
            "GET /metrics"
        ]
    }
}