# Environment Configuration
# Copy to .env and customize for your deployment

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL=postgresql+asyncpg://vgap:vgap_dev_password@localhost:5432/vgap
DATABASE_SYNC_URL=postgresql://vgap:vgap_dev_password@localhost:5432/vgap

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# =============================================================================
# SECURITY
# =============================================================================
# Generate with: openssl rand -hex 32
SECRET_KEY=dev-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=60
ADMIN_EMAIL=admin@vgap.local
ADMIN_PASSWORD=admin_dev_password

# =============================================================================
# API SETTINGS
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_DEBUG=true
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]

# =============================================================================
# STORAGE PATHS
# =============================================================================
DATA_DIR=/data
UPLOAD_DIR=/data/uploads
RESULTS_DIR=/data/results
REFERENCES_DIR=/data/references
TEMP_DIR=/data/temp

# =============================================================================
# PIPELINE DEFAULTS
# =============================================================================
# Consensus generation
MIN_DEPTH=10
MIN_ALLELE_FREQ=0.5

# Variant calling
MIN_VARIANT_DEPTH=10
MIN_VARIANT_FREQ=0.02
STRAND_BIAS_THRESHOLD=0.05

# Quality control
MIN_READ_LENGTH=50
MIN_BASE_QUALITY=20
MAX_UPLOAD_SIZE_GB=20

# Contamination thresholds
NEGATIVE_CONTROL_THRESHOLD=0.001

# =============================================================================
# LINEAGE DATABASES
# =============================================================================
PANGOLIN_DATA_PATH=/data/references/pangolin
NEXTCLADE_DATA_PATH=/data/references/nextclade

# =============================================================================
# MONITORING
# =============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
LOG_LEVEL=INFO
LOG_FORMAT=json

# =============================================================================
# RESOURCE LIMITS
# =============================================================================
MAX_CONCURRENT_RUNS=4
WORKER_MEMORY_LIMIT_MB=16384
WORKER_CPU_LIMIT=4

# =============================================================================
# DATA RETENTION
# =============================================================================
DATA_RETENTION_DAYS=730
ARCHIVE_ENABLED=true
